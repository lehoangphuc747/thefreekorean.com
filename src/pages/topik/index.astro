---
import TopikLayout from '../../layouts/TopikLayout.astro';
import TopikGrid from '../../components/topik/TopikGrid.astro';
import TopikFilter from '../../components/topik/TopikFilter.astro';

// Import t·∫•t c·∫£ t√†i li·ªáu TOPIK t·ª´ content
const topikFiles = import.meta.glob('../../content/topik/*.mdx', { eager: true });

// Transform data cho TOPIK
const topikDocuments = Object.entries(topikFiles)
  .map(([path, file]) => ({
    slug: path.split('/').pop()?.replace('.mdx', '') || '',
    title: file.frontmatter?.title || '',
    description: file.frontmatter?.description || '',
    category: file.frontmatter?.category || 'TOPIK',
    type: file.frontmatter?.type || '',
    level: file.frontmatter?.level || '',
    difficulty: file.frontmatter?.difficulty || '',
    cover: file.frontmatter?.cover || '',
    date: file.frontmatter?.date || new Date().toISOString(),
    downloadUrl: file.frontmatter?.downloadUrl || '',
    practiceUrl: file.frontmatter?.practiceUrl || '',
    duration: file.frontmatter?.duration || '',
    questions: file.frontmatter?.questions || 0,
    url: file.frontmatter?.url || '',
    content: file.Content
  }))
  .filter(doc => doc.title)
  .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());

// Th·ªëng k√™ TOPIK
const stats = {
  total: topikDocuments.length,
  topikI: topikDocuments.filter(doc => doc.level === 'TOPIK I').length,
  topikII: topikDocuments.filter(doc => doc.level === 'TOPIK II').length,
  vocabulary: topikDocuments.filter(doc => doc.type === 'vocabulary').length,
  practice: topikDocuments.filter(doc => doc.type === 'practice').length,
  tests: topikDocuments.filter(doc => doc.type === 'test').length,
};
---

<TopikLayout 
  title="TOPIK - Test of Proficiency in Korean" 
  description="Luy·ªán thi TOPIK mi·ªÖn ph√≠ v·ªõi t√†i li·ªáu ch·∫•t l∆∞·ª£ng cao"
  showBackButton={false}
>
  
  <!-- Hero Section -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-blue-600/10 via-indigo-600/5 to-purple-600/10"></div>
    <div class="relative max-w-7xl mx-auto px-4 py-16 text-center">
      
      <!-- Hero Icon -->
      <div class="mb-8">
        <div class="w-24 h-24 mx-auto bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mb-6 shadow-xl animate-pulse">
          <span class="text-4xl">üéØ</span>
        </div>
      </div>
      
      <!-- Hero Content -->
      <h1 class="text-4xl md:text-6xl font-bold text-gray-900 mb-6">
        <span class="bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">TOPIK</span>
        <br>
        <span class="text-2xl md:text-3xl font-semibold text-gray-700">Test of Proficiency in Korean</span>
      </h1>
      
      <p class="text-xl md:text-2xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed">
        Luy·ªán thi TOPIK mi·ªÖn ph√≠ v·ªõi b·ªô s∆∞u t·∫≠p t√†i li·ªáu ch·∫•t l∆∞·ª£ng cao, 
        ƒë·ªÅ thi th·ª≠ v√† h·ªá th·ªëng h·ªçc t·∫≠p hi·ªáu qu·∫£
      </p>
      
      <!-- Stats Overview -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 max-w-2xl mx-auto">
        <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 shadow-lg border border-white/20">
          <div class="text-2xl font-bold text-blue-600">{stats.total}</div>
          <div class="text-sm text-gray-600">T√†i li·ªáu</div>
        </div>
        <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 shadow-lg border border-white/20">
          <div class="text-2xl font-bold text-green-600">{stats.topikI}</div>
          <div class="text-sm text-gray-600">TOPIK I</div>
        </div>
        <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 shadow-lg border border-white/20">
          <div class="text-2xl font-bold text-indigo-600">{stats.topikII}</div>
          <div class="text-sm text-gray-600">TOPIK II</div>
        </div>
        <div class="bg-white/80 backdrop-blur-sm rounded-xl p-4 shadow-lg border border-white/20">
          <div class="text-2xl font-bold text-purple-600">{stats.vocabulary}</div>
          <div class="text-sm text-gray-600">T·ª´ v·ª±ng</div>
        </div>
      </div>
      
      <!-- CTA Buttons -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
        <a 
          href="/topik/tests" 
          class="px-8 py-4 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-xl font-bold text-lg hover:from-red-700 hover:to-orange-700 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"
        >
          üéØ L√†m ƒë·ªÅ thi ngay
        </a>
        <a 
          href="/topik/practice" 
          class="px-8 py-4 bg-white text-gray-700 rounded-xl font-bold text-lg hover:bg-gray-50 transition-all duration-300 shadow-lg border border-gray-200"
        >
          üìù Luy·ªán t·∫≠p tr∆∞·ªõc
        </a>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
          H·ªá th·ªëng thi th·ª≠ TOPIK h√†ng ƒë·∫ßu
        </h2>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
          Tr·∫£i nghi·ªám thi th·ª≠ gi·ªëng nh∆∞ k·ª≥ thi th·∫≠t v·ªõi c√¥ng ngh·ªá hi·ªán ƒë·∫°i
        </p>
      </div>
      
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
        <!-- Feature 1 -->
        <div class="text-center group">
          <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
            <span class="text-2xl">üéØ</span>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2">ƒê·ªÅ thi ch√≠nh th·ª©c</h3>
          <p class="text-gray-600">B·ªô s∆∞u t·∫≠p ƒë·ªÅ thi TOPIK ch√≠nh th·ª©c t·ª´ c√°c k·ª≥ thi ƒë√£ t·ªï ch·ª©c</p>
        </div>
        
        <!-- Feature 2 -->
        <div class="text-center group">
          <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
            <span class="text-2xl">‚è±Ô∏è</span>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2">ƒê·∫øm gi·ªù th·ª±c t·∫ø</h3>
          <p class="text-gray-600">H·ªá th·ªëng ƒë·∫øm ng∆∞·ª£c th·ªùi gian ch√≠nh x√°c nh∆∞ k·ª≥ thi th·∫≠t</p>
        </div>
        
        <!-- Feature 3 -->
        <div class="text-center group">
          <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
            <span class="text-2xl">üìä</span>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2">Ph√¢n t√≠ch k·∫øt qu·∫£</h3>
          <p class="text-gray-600">B√°o c√°o chi ti·∫øt ƒëi·ªÉm s·ªë v√† ph√¢n t√≠ch t·ª´ng k·ªπ nƒÉng</p>
        </div>
        
        <!-- Feature 4 -->
        <div class="text-center group">
          <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
            <span class="text-2xl">üéß</span>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2">Audio ch·∫•t l∆∞·ª£ng cao</h3>
          <p class="text-gray-600">File √¢m thanh r√µ r√†ng cho ph·∫ßn thi nghe gi·ªëng nh∆∞ thi th·∫≠t</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Tests Section -->
  <section class="py-16 bg-gradient-to-br from-gray-50 to-blue-50">
    <div class="max-w-7xl mx-auto px-4">
      
      <!-- Section Header -->
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
          ƒê·ªÅ thi n·ªïi b·∫≠t
        </h2>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
          C√°c ƒë·ªÅ thi TOPIK ƒë∆∞·ª£c l√†m nhi·ªÅu nh·∫•t v√† ƒë√°nh gi√° cao
        </p>
      </div>

      <!-- Featured Test Cards -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
        
        <!-- TOPIK I Official -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
          <div class="h-3 bg-gradient-to-r from-green-500 to-emerald-600"></div>
          <div class="h-48 bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center relative">
            <div class="text-center text-white">
              <div class="text-4xl mb-2">üü¢</div>
              <div class="text-xl font-bold">TOPIK I</div>
              <div class="text-sm opacity-90">K·ª≥ thi 04/2023</div>
            </div>
            <div class="absolute top-3 left-3">
              <span class="px-3 py-1 bg-gradient-to-r from-amber-500 to-orange-600 text-white text-xs font-bold rounded-full shadow-lg">
                üèÜ CH√çNH TH·ª®C
              </span>
            </div>
          </div>
          <div class="p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-2">TOPIK I - K·ª≥ thi ch√≠nh th·ª©c</h3>
            <p class="text-gray-600 text-sm mb-4">ƒê·ªÅ thi TOPIK I ch√≠nh th·ª©c v·ªõi 70 c√¢u h·ªèi, th·ªùi gian 100 ph√∫t</p>
            <div class="grid grid-cols-2 gap-2 mb-4 text-xs">
              <div class="text-center">
                <div class="font-bold text-blue-600">70</div>
                <div class="text-gray-600">C√¢u h·ªèi</div>
              </div>
              <div class="text-center">
                <div class="font-bold text-green-600">100m</div>
                <div class="text-gray-600">Th·ªùi gian</div>
              </div>
            </div>
            <a 
              href="/topik/tests/topik-i-2023-1"
              class="w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white text-center py-3 px-4 rounded-lg font-bold hover:from-green-700 hover:to-emerald-700 transition-all duration-200 block"
            >
              üéØ B·∫Øt ƒë·∫ßu thi
            </a>
          </div>
        </div>
        
        <!-- TOPIK II Official -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
          <div class="h-3 bg-gradient-to-r from-blue-500 to-indigo-600"></div>
          <div class="h-48 bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center relative">
            <div class="text-center text-white">
              <div class="text-4xl mb-2">üîµ</div>
              <div class="text-xl font-bold">TOPIK II</div>
              <div class="text-sm opacity-90">K·ª≥ thi 04/2023</div>
            </div>
            <div class="absolute top-3 left-3">
              <span class="px-3 py-1 bg-gradient-to-r from-amber-500 to-orange-600 text-white text-xs font-bold rounded-full shadow-lg">
                üèÜ CH√çNH TH·ª®C
              </span>
            </div>
          </div>
          <div class="p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-2">TOPIK II - K·ª≥ thi ch√≠nh th·ª©c</h3>
            <p class="text-gray-600 text-sm mb-4">ƒê·ªÅ thi TOPIK II ch√≠nh th·ª©c v·ªõi 54 c√¢u h·ªèi, th·ªùi gian 180 ph√∫t</p>
            <div class="grid grid-cols-2 gap-2 mb-4 text-xs">
              <div class="text-center">
                <div class="font-bold text-blue-600">54</div>
                <div class="text-gray-600">C√¢u h·ªèi</div>
              </div>
              <div class="text-center">
                <div class="font-bold text-green-600">180m</div>
                <div class="text-gray-600">Th·ªùi gian</div>
              </div>
            </div>
            <a 
              href="/topik/tests/topik-ii-2023-1"
              class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-center py-3 px-4 rounded-lg font-bold hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 block"
            >
              üéØ B·∫Øt ƒë·∫ßu thi
            </a>
          </div>
        </div>
        
        <!-- Practice Test -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
          <div class="h-3 bg-gradient-to-r from-purple-500 to-pink-600"></div>
          <div class="h-48 bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center relative">
            <div class="text-center text-white">
              <div class="text-4xl mb-2">üìù</div>
              <div class="text-xl font-bold">Luy·ªán t·∫≠p</div>
              <div class="text-sm opacity-90">ƒê·ªÅ thi th·ª≠</div>
            </div>
          </div>
          <div class="p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-2">ƒê·ªÅ thi th·ª≠ TOPIK</h3>
            <p class="text-gray-600 text-sm mb-4">ƒê·ªÅ thi luy·ªán t·∫≠p v·ªõi ƒë·ªô kh√≥ v·ª´a ph·∫£i cho ng∆∞·ªùi m·ªõi b·∫Øt ƒë·∫ßu</p>
            <div class="grid grid-cols-2 gap-2 mb-4 text-xs">
              <div class="text-center">
                <div class="font-bold text-blue-600">70</div>
                <div class="text-gray-600">C√¢u h·ªèi</div>
              </div>
              <div class="text-center">
                <div class="font-bold text-green-600">100m</div>
                <div class="text-gray-600">Th·ªùi gian</div>
              </div>
            </div>
            <a 
              href="/topik/tests/topik-i-practice-1"
              class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-center py-3 px-4 rounded-lg font-bold hover:from-purple-700 hover:to-pink-700 transition-all duration-200 block"
            >
              üìù Luy·ªán t·∫≠p ngay
            </a>
          </div>
        </div>
      </div>
      
      <!-- View All Tests Button -->
      <div class="text-center">
        <a 
          href="/topik/tests" 
          class="inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-xl font-bold text-lg hover:from-red-700 hover:to-orange-700 transition-all duration-300 transform hover:scale-105 shadow-lg"
        >
          üéØ Xem t·∫•t c·∫£ ƒë·ªÅ thi
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Call to Action -->
  <section class="py-16 bg-gradient-to-r from-blue-600 to-indigo-600 text-white">
    <div class="max-w-4xl mx-auto px-4 text-center">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">
        S·∫µn s√†ng chinh ph·ª•c TOPIK?
      </h2>
      <p class="text-xl mb-8 opacity-90">
        B·∫Øt ƒë·∫ßu h√†nh tr√¨nh luy·ªán thi TOPIK c·ªßa b·∫°n ngay h√¥m nay
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a 
          href="/topik/practice" 
          class="px-8 py-4 bg-white text-blue-600 rounded-xl font-bold text-lg hover:bg-gray-100 transition-all duration-300 transform hover:scale-105"
        >
          üéØ B·∫Øt ƒë·∫ßu luy·ªán t·∫≠p
        </a>
        <a 
          href="/topik/vocabulary" 
          class="px-8 py-4 bg-transparent border-2 border-white text-white rounded-xl font-bold text-lg hover:bg-white hover:text-blue-600 transition-all duration-300"
        >
          üìñ H·ªçc t·ª´ v·ª±ng
        </a>
      </div>
    </div>
  </section>
</TopikLayout>

<style>
  /* Animations */
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }
  
  .animate-pulse {
    animation: float 3s ease-in-out infinite;
  }
  
  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }
</style> 