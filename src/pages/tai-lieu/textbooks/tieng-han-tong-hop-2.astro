---
import Layout from '../../../layouts/Layout.astro';
import TextbooksHeader from '../../../components/tai-lieu/TextbooksHeader.astro';
import TextbooksDownloader from '../../../components/tai-lieu/TextbooksDownloader.astro';
import PDFPreview from '../../../components/tai-lieu/PDFPreview.astro';
import RelatedDocuments from '../../../components/tai-lieu/RelatedDocuments.astro';

export const postData = {
  title: "Tiếng Hàn Tổng Hợp Sơ cấp 2",
  date: "2024-08-01",
  category: "Giáo trình",
  subcategory: "Tiếng Hàn Tổng Hợp",
  type: "PDF",
  cover: "/images/tieng-han-tong-hop-2.jpg",
  description: "Giáo trình nâng cao tiếp nối Sơ cấp 1",
  downloadUrl: "#",
  downloadOriginal: "#",
  downloadWorkbook: "#",
  downloadAudio: "#",
  fileSize: "~120MB",
  originalSize: "~200MB",
  workbookSize: "~30MB",
  audioSize: "Folder audio",
  pages: 260
};

const allDocuments = [
  {
    title: "Tiếng Hàn Tổng Hợp Sơ cấp 1",
    url: "/tai-lieu/textbooks/tieng-han-tong-hop-1",
    type: "PDF",
    size: "18.1MB",
    category: "Giáo trình",
    subcategory: "Tiếng Hàn Tổng Hợp",
    date: "2024-05-01"
  },
  {
    title: "Tiếng Hàn Tổng Hợp Sơ cấp 2",
    url: "/tai-lieu/textbooks/tieng-han-tong-hop-2",
    type: "PDF",
    size: postData.fileSize,
    category: postData.category,
    subcategory: postData.subcategory,
    date: postData.date
  },
  {
    title: "Anki - Tiếng Hàn Tổng Hợp 1",
    url: "/tai-lieu/anki/books/tieng-han-tong-hop/anki-tong-hop-1",
    type: "ANKI",
    cards: 1486,
    category: "Giáo trình",
    subcategory: "Tiếng Hàn Tổng Hợp",
    date: "2025-09-23"
  }
];

const related = allDocuments
  .filter(d => d.url !== "/tai-lieu/textbooks/tieng-han-tong-hop-2")
  .filter(d => d.subcategory === postData.subcategory || d.category === postData.category)
  .slice(0, 6);
---

<Layout title={postData.title}>
  <main class="container mx-auto px-4 py-8">
    <div class="max-w-4xl mx-auto">
      
      <!-- Header Component -->
      <TextbooksHeader 
        title={postData.title}
        description={postData.description}
        cover={postData.cover}
        type={postData.type}
        category={postData.category}
        subcategory={postData.subcategory}
        pages={postData.pages}
        fileSize={postData.fileSize}
      />

      <!-- Download Component -->
      <TextbooksDownloader 
        downloadUrl={postData.downloadUrl}
        downloadOriginal={postData.downloadOriginal}
        downloadWorkbook={postData.workbookSize}
        downloadAudio={postData.audioSize}
        fileSize={postData.fileSize}
        originalSize={postData.originalSize}
        workbookSize={postData.workbookSize}
        audioSize={postData.audioSize}
      />

      <!-- PDF Preview Component -->
      <PDFPreview 
        downloadUrl={postData.downloadUrl}
        title={`Xem trước: ${postData.title}`}
        height="600px"
      />

      <!-- Related Documents -->
      <RelatedDocuments title="Tài liệu liên quan" documents={related} />

    </div>
  </main>
</Layout>

<style>
  .prose { color: #374151; }
</style>
