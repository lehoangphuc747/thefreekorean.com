---
export interface Props {
  title: string;
  meaning: string;
  level: 'beginner' | 'intermediate' | 'advanced';
  slug: string;
  href: string;
  description?: string; // Optional short description
  tags?: string[];
}

const { title, meaning, level, href, description, tags = [] } = Astro.props;

/**
 * Mapping for display text of levels.
 */
const levelMap = {
  beginner: 'Sơ cấp',
  intermediate: 'Trung cấp', 
  advanced: 'Cao cấp'
};

/**
 * Color mapping for levels to apply consistent styling.
 * Using Tailwind CSS classes logic.
 */
const levelColorMap = {
  beginner: 'text-emerald-600 bg-emerald-50 border-emerald-100',
  intermediate: 'text-amber-600 bg-amber-50 border-amber-100',
  advanced: 'text-rose-600 bg-rose-50 border-rose-100'
};
---

<a href={href} class="group block h-full">
  <article class="h-full bg-white rounded-2xl border border-slate-200 p-6 transition-all duration-300 hover:shadow-lg hover:border-indigo-300 hover:-translate-y-1 relative overflow-hidden">
    <!-- Level Badge -->
    <div class="flex items-center justify-between mb-4">
      <span class={`text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide ${levelColorMap[level]}`}>
        {levelMap[level]}
      </span>
      
      <!-- Arrow Icon -->
      <span class="text-slate-300 group-hover:text-indigo-500 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M5 12h14"></path>
          <path d="m12 5 7 7-7 7"></path>
        </svg>
      </span>
    </div>

    <!-- Content -->
    <div>
      <h3 class="text-xl font-bold text-slate-800 mb-2 group-hover:text-indigo-600 transition-colors">
        {title}
      </h3>
      <p class="text-indigo-500 font-medium mb-3 text-lg">
        {meaning}
      </p>
      
      {description && (
        <p class="text-slate-500 text-sm line-clamp-2 leading-relaxed mb-4">
          <span set:html={description} />
        </p>
      )}
    </div>

    <!-- Tags (if any) -->
    {tags.length > 0 && (
      <div class="flex flex-wrap gap-2 mt-auto pt-4 border-t border-slate-100">
        {tags.slice(0, 3).map(tag => (
          <span class="text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded">#{tag}</span>
        ))}
        {tags.length > 3 && (
          <span class="text-xs text-slate-400 px-1">+{tags.length - 3}</span>
        )}
      </div>
    )}

    <!-- Interactive Splash Background (Optional visual flair) -->
    <div class="absolute -right-4 -bottom-4 w-24 h-24 bg-gradient-to-br from-indigo-50 to-transparent rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"></div>
  </article>
</a>
