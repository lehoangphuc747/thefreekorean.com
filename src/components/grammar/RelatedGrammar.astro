---
export interface Props {
  relatedGrammar: Array<{
    title: string;
    meaning: string;
    level: string;
    slug: string;
  }>;
}

const { relatedGrammar } = Astro.props;

const levelMap = {
  beginner: 'Sơ cấp',
  intermediate: 'Trung cấp',
  advanced: 'Cao cấp'
};

const levelColorMap = {
  beginner: 'bg-emerald-100 text-emerald-700',
  intermediate: 'bg-amber-100 text-amber-700',
  advanced: 'bg-rose-100 text-rose-700'
};
---

{relatedGrammar.length > 0 && (
  <section class="mt-8 mb-8 p-6 bg-slate-50 border border-slate-200 rounded-xl">
    <h3 class="text-lg font-bold text-slate-800 mb-4">Ngữ pháp liên quan</h3>
    <div class="flex flex-col gap-3">
      {relatedGrammar.map(grammar => (
        <a 
          href={`/grammar/${grammar.level}/${grammar.slug}`}
          class="flex justify-between items-center p-4 bg-white border border-slate-200 rounded-lg transition-all duration-200 hover:border-indigo-400 hover:shadow-md hover:-translate-y-0.5 group"
        >
          <div class="flex flex-col gap-1">
            <span class="font-semibold text-sm text-slate-800 group-hover:text-indigo-600 transition-colors">
              {grammar.title}
            </span>
            <span class="text-xs text-slate-500 group-hover:text-indigo-400">
              {grammar.meaning}
            </span>
          </div>
          <span class={`px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide shrink-0 ${levelColorMap[grammar.level as keyof typeof levelColorMap] || 'bg-slate-100 text-slate-600'}`}>
            {levelMap[grammar.level as keyof typeof levelMap] || grammar.level}
          </span>
        </a>
      ))}
    </div>
  </section>
)}
