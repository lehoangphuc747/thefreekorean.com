---
// Component: Print-friendly CSS
// Tối ưu hóa giao diện khi in bài viết
---

<style is:global>
  /* Mặc định ẩn header và footer in trên màn hình */
  .print-header,
  .print-footer,
  .print-watermark {
    display: none !important;
  }

  @media print {
    /* 1. Ẩn các thành phần UI không cần thiết */
    nav,
    .navbar,
    footer,
    .footer,
    .grammar-sidebar,
    .grammar-post-sidebar,
    .sidebar,
    .grammar-toc,
    .toc,
    .breadcrumb,
    .back-button,
    .action-buttons,
    .share-button,
    .print-btn,
    .pdf-btn,
    .navigation-buttons,
    .related-grammar,
    .scroll-to-top,
    button,
    .sidebar-toggle,
    .toc-toggle,
    .role-switch-container,
    .mobile-panel-actions,
    #mobile-panel-overlay,
    .copy-toast {
      display: none !important;
    }

    /* 2. Reset layout cơ bản */
    body {
      background: white !important;
      color: black !important;
      margin: 0 !important;
      padding: 0 !important;
      font-family: "Times New Roman", Times, serif !important; /* Font serif dễ đọc khi in */
    }

    /* 3. Cấu hình Header/Footer cho bản in */
    .print-header {
      display: block !important;
      text-align: center !important;
      margin-bottom: 20pt !important;
      padding-bottom: 10pt !important;
      border-bottom: 3px solid #3b82f6 !important;
      page-break-after: avoid !important;
    }

    .print-brand {
      font-size: 20pt !important;
      font-weight: bold !important;
      color: #3b82f6 !important;
      margin-bottom: 5pt !important;
      text-transform: uppercase !important;
    }

    .print-subtitle {
      font-size: 12pt !important;
      color: #666 !important;
      font-style: italic !important;
    }

    .print-footer {
      display: block !important;
      margin-top: 30pt !important;
      padding-top: 10pt !important;
      border-top: 1px solid #e5e7eb !important;
      text-align: center !important;
      font-size: 10pt !important;
      color: #999 !important;
      page-break-before: auto !important;
    }

    /* Watermark chéo toàn trang */
    .print-watermark {
      display: block !important;
      position: fixed !important;
      top: 50% !important;
      left: 50% !important;
      transform: translate(-50%, -50%) rotate(-45deg) !important;
      font-size: 60pt !important; /* Giảm size xuống để vừa trang A4 */
      font-weight: bold !important;
      color: rgba(0, 0, 0, 0.05) !important;
      white-space: nowrap !important;
      pointer-events: none !important;
      z-index: -1 !important;
      width: 100% !important;
      text-align: center !important;
      overflow: visible !important; /* Đảm bảo không bị cắt nếu hơi dài */
    }

    /* 4. Tinh chỉnh nội dung chính */
    .grammar-post,
    .grammar-main,
    main {
      max-width: none !important;
      width: 100% !important;
      padding: 0 !important;
      margin: 0 !important;
      box-shadow: none !important;
      border: none !important;
      z-index: 1 !important; /* Đảm bảo nội dung nằm trên watermark */
      background: transparent !important; /* Để nhìn xuyên qua thấy watermark */
    }

    .grammar-post-container {
      display: block !important;
      padding: 0 !important;
      margin: 0 !important;
    }

    /* Typography */
    .grammar-title {
      font-size: 24pt !important;
      color: #1e293b !important;
      margin-bottom: 10pt !important;
      text-align: center !important;
    }

    .grammar-meaning {
      font-size: 16pt !important;
      color: #3b82f6 !important;
      font-weight: bold !important;
      text-align: center !important;
      margin-bottom: 15pt !important;
    }

    .grammar-description {
      font-size: 12pt !important;
      font-style: italic !important;
      color: #555 !important;
      margin-bottom: 20pt !important;
      border-left: 3pt solid #ddd !important;
      padding-left: 10pt !important;
    }

    /* Headings */
    h1, h2, h3 {
      color: #111 !important;
      page-break-after: avoid !important;
      break-after: avoid !important;
    }

    h2 {
      font-size: 16pt !important;
      border-bottom: 1pt solid #eee !important;
      padding-bottom: 5pt !important;
      margin-top: 20pt !important;
    }

    h3 {
      font-size: 14pt !important;
      margin-top: 15pt !important;
    }

    /* Paragraphs & Lists */
    p, li {
      font-size: 12pt !important;
      line-height: 1.5 !important;
      orphans: 3;
      widows: 3;
      text-align: justify !important;
    }

    /* Tables */
    table {
      width: 100% !important;
      border: 1px solid #999 !important;
      border-collapse: collapse !important;
      margin: 15pt 0 !important;
      page-break-inside: avoid !important;
    }

    th, td {
      border: 1px solid #999 !important;
      padding: 8pt !important;
      font-size: 11pt !important;
    }

    th {
      background-color: #f3f4f6 !important;
      font-weight: bold !important;
    }

    /* Badges (Level, Tags) */
    .grammar-badges {
      justify-content: center !important;
      margin-bottom: 15pt !important;
    }

    .level-badge, .tag-badge {
      border: 1pt solid #999 !important;
      background: transparent !important;
      color: #333 !important;
      padding: 2pt 8pt !important;
    }

    /* Links */
    a {
      text-decoration: none !important;
      color: #2563eb !important;
    }
    
    /* Hiển thị URL sau link (trừ link nội bộ anchor #) */
    /* Tắt cái này vì nhiều link sẽ làm rối bản in nếu không cần thiết */
    /* a[href]:not([href^="#"])::after {
      content: " (" attr(href) ")";
      font-size: 0.8em;
      color: #666;
    } */

    /* Images */
    img {
      max-width: 100% !important;
      height: auto !important;
      display: block !important;
      margin: 15pt auto !important;
      border: 1pt solid #eee !important;
    }

    /* Page Margins */
    @page {
      size: A4;
      margin: 2cm;
    }
  }
</style>